import serial
import ciedriver

msg = b'\x81\x10\x802\x10\xfa\t\xf7\x00\x00\x06\xfa\x00\x00\x06\xfa\x00\x00\x00\x01\x05\x00\x00\xfb\x05\xfb\x00\x04\xfb\x05\xfb\x00\x00\x00\x00\x00\x00\x05\x03\xf8\x00\x00\x00\xff\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x08\xf8\x00\x00\x01\x00\x00\x00\x00\x00\x00\x00\x00\x05\xfb\x00\x00\x05\xfb\x05\xfc\x00\x00\x00\x00\x00\x00\x00\x04\xfb\x00\x00\x05\xfb\x00\x00\xff\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x01\x00\x00\x00\x00\x05\xfb\x05\xfb\x00\x00\x00\x00\x00\x00\x00\x01\x00\x00\x00\x00\x00\x00\x00\x04\xfb\x00\x00\x00\x00\x00\x05\xfb\x00\x00\x05\xfb\x00\x00\x00\x04\xfe\x02\x00\xfb\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x05\xfc\x06\xfa\x00\x06\xfa\x00\x00\x06\x00\x00\xfa\x00\x00\x00\x00\x06\xfb\x00\x00\x00\x08\xf8\x00\xff\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x05\xfb\x00\x00\xff\x00\x00\x03\x02\x00\xfb\x03\xfd\x00\x00\x08\xf8\x00\x00\x05\xfc\x00\x00\x00\x00\x00\x00\x00\x00\x00\x05\xfb\x00\x00\x00\x00\x01\x00\x08\xf8\x00\x00\x00\x00\xff\x801K\x810\x800\x03\x80/T\x80(\xde\x80\x1c\x93\x80\x15;\x80\x0f*\x80\r4\x9d\x1c\x80\x0f\x1f\x80\x10\xd4\x80\x12\x8d\x80\x13\xe6\x80\x15\xd7\x80\x17\x1f\x80\x19\x08\x80\x1aI\x80\x1b\xe5\x80\x1d\x15\x80\x1e\x9e\x80\x1f\xa5\x80 \xfd\x80"\x04\x80#\xa3\x80$\xc5\x80&_\x80\'\xc8\x80*$\x80+\xef\x80.j\x80/\xee\x81\x10\x800\xb2\xc8\x7f\xe3B\x00\xa7\x00\xd0\x03\xe8\x7f\xa1\x800\x87\x0c\x08\r\t\x08\x0e\x08\x0e\x08\x0c\n\x08\x0c\x0e\t\n\x0b\t\x0b\x0b\x07\x0e\x0b\x0b\x06\r\x0b\t\r\x0c\x08\x0b\x0b\x08\x0e\x08\x10\xf8\x05\xfb\x00\x00\x05\x00\xfb\x00\x00\x00\x00\x00\x00\x00\x01\x00\x06\xfa\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x06\x00\xfb\x00\x00\x00\x00\x00\xff\x05\xfb\x00\x00\x00\x05\xfb\x00\x00\x00\x00\x00\x00\x05\xfb\xff\x00\x00\x00\x05\xfb\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x01\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x06\x00\xfa\x06\xfa\x01\x00\x00\x00\x00\x00\x00\x00\xff\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x05\xfb\x00\x00\x00\x05\xfb\x00\xff\x05\xfb\x00\x00\x05\xfb\x00\x01\x00\x00\x06\xfa\x00\x00\x00\x00\x00\x00\x00\x05\xfb\x00\x00\x01\x00\x05\xfb\x00\x00\x00\x05\xfa\x00\x00\x00\x05\xfb\x00\x05\xfb\x00\x00\x00\x00\x00\x00\x00\xff\x00\x00\x00\x05\xfb\x05\xfb\x00\x00\x00\x05\x00\xfb\x00\x00\x01\x00\x00\x00\xfd\x08\xfb\x00\x00\x06\xfa\x06\xfa\x00\x06\xfa\x01\x05\xfb\xfd\x08\x00\xfb\x00\xff\x00\x00\x00\x05\xfb\x05\xfb\x00\x00\x00\x05\xfb\x00\x00\x05\xfa\x00\x00\x00\x05\xfb\x05\xfb\x00\x00\x00\x00\x00\x00\x00\x00\x01\x00\x00\x00\x05\xfb\x05\xfb\x05\xfb\x00\x00\x00\x05\xfb\x00\xa3\x810\x800\x08\xf3\x80)@\x80!\n\x80\x15U\x80\x10\x82\x80\rd\x80\x0c\xb6\x80\r\x98\x80\x0e\x9e\x80\x10C\x80\x11\xb0\x80\x14\x01\x80\x15I\x80\x17\x1f\x80\x18\x8b\x80\x1a^\x80\x1be\x80\x1d\x1d\x80\x1e?\x80\x1f\x87\x80 \x93\x80!\xfc\x80"\xec\x80$~\x80%\xc6\x80\'\xd8\x80)o\x80+\xd1\x80-\xb2\x800\x0c\x81\x10j\x7fcB\x00\xa9\x00\xd0\x03\xe8\x7f\xaf\x800|\x0b\x0e\x05\x0e\x0b\x0b\t\x0b\x0e\x08\t\r\x08\x0c\n\t\x0e\n\x0b\t\x0b\x0b\t\x0b\x0b\x0b\x0b\x0e\x05\x0b\x0b\x08\x13\x03\x0e\x08\x0e\x08\x01\xfa\x00\x00\x00\x00\x00\x00\x04\xfb\x00\x00\x00\x03\x02\x00\xfb\x00\x05\x00\x00\xfb\x00\x00\x01\x00\x00\x00\x06\xfa\x00\x00\x00\x05\xfb\x00\x00\x00\x05\x00\xfc\x00\x00\x05\xfb\x00\x05\xfb\xff\x00\x00\x00\x00\x03\x02\xfb\x00\x00\x06\x00\xfa\x06\xfa\x00\x02\xfd\x00\x00\x00\x00\x00\x00\x05\xfb\x00\x00\x00\x05\xfb\x05\xfc\x05\xfb\x00\x05\xfb\x05\xfb\x00\x00\x00\x00\x06\xfa\x00\x00\x01\x05\xfb\x05\xfb\x05\x00\xfb\xff\x00\x05\xfb\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x05\xfb\x00\x00\x00\x00\x00\xff\x00\x00\x00\x05\x00\xfb\x00\x01\x00\x00\x06\xfa\x00\x06\xfa\x05\xfb\x08\xfd\xfb\x00\x00\x00\x06\xfb\x00\x05\xfb\x00\x00\x00\xff\x05\xfb\x05\x00\xfb\x05\x00\x00\xfb\x00\x08\xf8\x00\x00\x00\xff\x03\x02\xfb\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x01\x00\x00\x06\xfa\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x01\x00\x05\xfb\x05\x00\xfb\x00\xff\x03\xfd\x05\x00\xfb\x00\x00\x08\xf8\x00\x00\x00\x00\x00\x00\xff\x00\x00\x00\x00\x08\xf8\x05\xfb\x00\x00\x00\x00\x03\xfd\x00\x01\x00\x00\x00\x06\xfd\xfd\x801Q\x810\x800\x00\x80/Z\x80)\x17\x80\x1c\xbf\x80\x15J\x80\x0e\xea\x80\r\x1d\x9eB\x80\x0e\xdf\x80\x10W\x80\x12x\x80\x13\xc7\x80\x15\xfe\x80\x16\xf0\x80\x18\xe2\x80\x1a0\x80\x1c\x14\x80\x1d\x1a\x80\x1e\x83\x80\x1f\x92\x80\xf5\x80"\x12\x80#u\x80$\xa1\x80&Z\x80\'\xd8\x80*\x11\x80+\xd1\x80.Q\x80/\xe8\x81\x10\x800\x94\xe8\x7f\xa4B\x00\x9e\x00\xd0\x03\xe8\x7f\x98\x800\x8a\x0b\x0b\x0b\x08\x0b\x0b\t\x0e\x08\x0b\x0b\x08\x0e\x0b\x0b\t\x0b\x0e\n\t\x0b\x08\x0b\x0b\x08\x0b\x0b\t\r\t\x0e\x08\x0c\r\x06\x11\x05\x00\xfa\x05\xfb\x00\x00\x00\x00\x00\x00\x05\x00\xfb\x05\xfb\x00\x00\x04\x00\xfe\xfd\x00\x05\x00\xfb\x00\x00\x00\x00\x05\xfb\x05\xfb\x01\x00\x00\x00\x00\x06\xfa\x06\xfa\x00\x00\x00\x00\x00\x00\x00\x01\x00\x00\x05\xfb\x00\x00\x00\xff\x00\x00\x03\x02'

ser = serial.Serial()
servo = ciedriver.ServoCIE(ser)

servo.openChannels['C'] = [[100, 0.2713, 3333, 'ml/s', 'CU']]
servo.openChannels['B'] = [[200, 0.1, 0, 'breaths/min', 'BT'], [205, 0.1, 0, 'cmH2O', 'BT'], [209, 0.1, 0, '%', 'BT']]

servo.channelData['C'] = {channel[0]: [] for channel in servo.openChannels['C']}
servo.channelData['B'] = {channel[0]: [] for channel in servo.openChannels['B']}

print(servo.openChannels)
print(servo.channelData)

servo.testDataStream(msg)

print(len(servo.channelData['C'][100]))
print(len(servo.channelData['B'][200]))
print(len(servo.channelData['B'][205]))
print(len(servo.channelData['B'][209]))
